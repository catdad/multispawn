language: node_js

node_js:
  - 'node'
  - '10'
  - '8'
  - '6'

script:
  - npm test

addons:
  code_climate:
    repo_token: 4140e6c153bcc97efb7e556a899b946fe7ed4fe3d19457a761e435423caa8c2c

after_script:
  - codeclimate-test-reporter < coverage/lcov.info

jobs:
  include:
  - stage: npm release
    if: tag IS present
    node_js: '10'
    script: echo "Deploying to npm ..."
    after_script: skip
    deploy:
      provider: npm
      email: vatev.1+npm@gmail.com
      api_key:
        secure: IM+qWiyLZsdGllLI3d8HTQ7cIZMYom1l3IvHgyvYMHf+siW1nOHGNaQwb7ak8+rpEA2PSEumnVCa0t3CIYBiTKIaZV9wGOM8tVUMCjdZmoJwtZP/cWvcpgg1DHmT4LCVbja7+mQWFrG4Td82dPGcso5tDu7N6iAbN0jKt/mEw5WMOO8+JjFTV83cx88+qgv0y6WXVRU3i5ENG31F7OGMnvOk1YGiaYofH+4pXV97cSukgzYYY81IdR3jsMJsR9xbHBBqgyw/w0RjZKNLfXmXaMPDdQPeXGDUBqFylbi2IXjmZG1Zq0THDKgOVz66u7FLC2dQpOhEzQy18Bd7Dv3Z4Kot6d0PoCADpZUoOt12xBZiGR9DEz22jAKmW09HESxYJ/2M47YjiIZDosF17rutQbXeXXlSyLLcBOxsYOmhA93tsyjfRAt8ZXIxgdrIVETuS/xN9uIVTcX+qHMl/AWyMOEfdqZsJYkUwJoRPEhsWwJu+S9JTS+xJ04h+6mgTHfF+n7YVEJcjLxQ2FLW8z+Xo+F7frkdqOoXZVruBaa3itx6r9CvBe1XQW0viymvWsNAdWbGeWIpFr/OpGGCaTYqFQfWAZA2mCQ3UnkckGDnGzeAV+EqSwIrRc9H6vlTR0B6BMWiTuo8XWCwmVyHM8HJlAP6vLdMYQO+VahKfZDWERM=
      on:
        tags: true
        repo: catdad/multispawn
