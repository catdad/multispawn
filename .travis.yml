language: node_js

node_js:
  - 'node'
  - '10'
  - '8'
  - '6'

script:
  - npm test

addons:
  code_climate:
    repo_token: 4140e6c153bcc97efb7e556a899b946fe7ed4fe3d19457a761e435423caa8c2c

after_script:
  - codeclimate-test-reporter < coverage/lcov.info

jobs:
  include:
  - stage: npm release
    if: tag IS present
    node_js: '10'
    script: echo "Deploying to npm ..."
    after_script: skip
    deploy:
      provider: npm
      email: vatev.1+npm@gmail.com
      api_key:
        secure: L8D5bvFJ4UCcJeWwqMCLBPy/7tJBOfYb/GwCDbaC/hZ0eRLg0izzruyQbd1yN9jt21K/jWtRgO0uH9ILbV5p+Yv8a0sePMs748oDXtXuNnxwdF627RNF+q46d65iG2ueLYkOuuxTcgL1l2t7yIgHQ0JGAgLGfXjr5sW2zdAAtmQiLJeaLQeaQNL5jaJK1jHu6ewk7t/EIzwQOnlp2JkJVl4ZPziJCT7Y/jEEElRLLu/K9hqtaGG1JIEGMk3/1Q2IHbss2SzkRVxyAvpYl1u3KF0Y4foteeg5H9JGs4peOfWwpJNCdWKwFpsqyBkTqdI7NFOf7iVPnq+/pp6sQ4oM8xwXZ1c4nxXCxlqgt6s05/4hrUeA2A+EWk0CKUOV+uhETvSqV1s+TOzvP2BtwyMMab4eWsagz/f5uK+Hu4sVkmxqb08/dAFrBnONd1yn1x3AuT0qZ7gtQ+9V/XD6Mk0lzNstGLlY9vt9laaTw+rxhTzu1+smTQFTFVa+aILRj9nRb7n4jevAoJ+hBPm9pumqP2Va22+lTnTsmIQwBFTgMMQmSPhjTHR3R7vJTtk8j0+VMtTyHbAUncHe/YUPxgPMYeZaV2601OuhqkuED/iqqVpAjI+HHZQZGDQvhFVqx6L+ZQqArwT3tDxP9sCtagqHH0DzU7tINvSdPk9wPlqLXfw=
      on:
        tags: true
        repo: catdad/multispawn
